{"version":3,"sources":["components/TodoList/TodoList.tsx","api.ts","components/CurrentUser/CurrentUser.tsx","App.tsx","index.tsx"],"names":["TodoList","todos","setSelectedUserId","useState","filterByTitle","setFilterByTitle","isComplete","setIsComplete","visibleTodos","setVisibleTodos","preparedTodos","todosFilteredByTitle","filter","title","toLowerCase","includes","completed","preparingTodos","useEffect","className","type","value","onChange","event","target","name","map","item","checked","readOnly","userId","onClick","id","BASE_URL","getTodosFromServer","a","fetch","response","json","message","Error","getUserFromServer","users","CurrentUser","React","memo","clearUser","currentUser","setCurrentUser","isLoadingError","setLoadingError","then","receiveUserId","catch","fetchError","email","phone","App","selectedUserId","setTodos","error","setError","useCallback","receiveTodos","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.86ca47b0.chunk.js","sourcesContent":["import { Dispatch, useEffect, useState } from 'react';\nimport './TodoList.scss';\n\ninterface Props {\n  todos: Todo[];\n  setSelectedUserId: Dispatch<number>;\n}\n\nexport const TodoList: React.FC<Props> = ({ todos, setSelectedUserId }) => {\n  const [filterByTitle, setFilterByTitle] = useState<string>('');\n  const [isComplete, setIsComplete] = useState('show all');\n  const [visibleTodos, setVisibleTodos] = useState(todos);\n\n  const filterTodosByTitle = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setFilterByTitle(event.target.value);\n  };\n\n  const changeStatusOfTodo = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    setIsComplete(event.target.value);\n  };\n\n  const preparingTodos = () => {\n    const todosFilteredByTitle = todos.filter(({ title }) => {\n      const titleInLowerCase = title.toLowerCase();\n\n      return titleInLowerCase.includes(filterByTitle.toLowerCase());\n    });\n\n    switch (isComplete) {\n      case 'not completed':\n        return todosFilteredByTitle.filter(\n          ({ completed }) => !completed,\n        );\n\n      case 'completed':\n        return todosFilteredByTitle.filter(\n          ({ completed }) => completed,\n        );\n\n      default:\n        return todosFilteredByTitle;\n    }\n  };\n\n  const preparedTodos = preparingTodos();\n\n  useEffect(() => {\n    setVisibleTodos(preparedTodos);\n  }, [filterByTitle, isComplete, todos]);\n\n  return (\n    <div className=\"TodoList\">\n      <h2>Todos:</h2>\n\n      <div className=\"TodoList__sort\">\n        <label className=\"TodoList__label\">\n          Sort by title:\n          <input\n            className=\"TodoList__input\"\n            type=\"text\"\n            value={filterByTitle}\n            onChange={filterTodosByTitle}\n            data-cy=\"filterByTitle\"\n          />\n        </label>\n\n        <label className=\"TodoList__label\">\n          Sort by status:\n          <select\n            className=\"TodoList__input\"\n            name=\"isCompleted\"\n            value={isComplete}\n            onChange={changeStatusOfTodo}\n          >\n            <option value=\"show all\">Show all</option>\n\n            <option value=\"not completed\">Not completed</option>\n\n            <option value=\"completed\">Completed</option>\n          </select>\n        </label>\n      </div>\n\n      <div className=\"TodoList__list-container\">\n        <ul className=\"TodoList__list\">\n          {visibleTodos.map((item) => {\n            return (\n              <li\n                key={item.id}\n                className={`TodoList__item\n                  TodoList__item--${item.completed ? 'checked' : 'unchecked'}`}\n              >\n                <label>\n                  <input checked={item.completed} type=\"checkbox\" readOnly />\n                  <p>{item.title}</p>\n                </label>\n\n                {item.userId && (\n                  <button\n                    className=\"\n                    TodoList__user-button\n                    button\"\n                    type=\"button\"\n                    onClick={() => setSelectedUserId(item.userId)}\n                  >\n                    User&nbsp;#\n                    {item.userId}\n                  </button>\n                )}\n\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    </div>\n  );\n};\n","import { User } from './Types/User';\nimport { Todo } from './Types/Todo';\n\nconst BASE_URL = 'https://mate.academy/students-api';\n\nexport const getTodosFromServer = async (): Promise<Todo[]> => {\n  try {\n    const response = await fetch(`${BASE_URL}/todos`);\n    const todos = await response.json();\n\n    return todos;\n  } catch (error) {\n    if (\n      error\n      && typeof error === 'object'\n      && (error as Error).message === 'Failed to fetch'\n    ) {\n      throw new Error('Now you cannot connect the server and get todos');\n    } else {\n      throw error;\n    }\n  }\n};\n\nexport const getUserFromServer = async (id: number): Promise<User> => {\n  try {\n    const response = await fetch(`${BASE_URL}/users/${id}`);\n    const users = await response.json();\n\n    return users;\n  } catch (error) {\n    if (\n      error\n      && typeof error === 'object'\n      && (error as Error).message === 'Failed to fetch'\n    ) {\n      throw new Error('Cannot connect the server and get users');\n    } else {\n      throw error;\n    }\n  }\n};\n","import React, { useState, useEffect } from 'react';\nimport { getUserFromServer } from '../../api';\nimport './CurrentUser.scss';\n\ntype Props = {\n  userId: number,\n  clearUser: () => void,\n};\n\nexport const CurrentUser: React.FC<Props> = React.memo(({\n  userId,\n  clearUser,\n}) => {\n  const [currentUser, setCurrentUser] = useState<User | null>(null);\n  const [isLoadingError, setLoadingError] = useState(null);\n\n  useEffect(() => {\n    const newUser = getUserFromServer(userId);\n\n    newUser\n      .then((receiveUserId) => {\n        setCurrentUser(receiveUserId);\n        setLoadingError(null);\n      })\n      .catch((fetchError) => {\n        setCurrentUser(null);\n        setLoadingError(fetchError.message);\n      });\n  });\n\n  return (\n    <>\n      {currentUser && (\n        <div className=\"CurrentUser\">\n          <h2 className=\"CurrentUser__title\">\n            <span>\n              {`Selected user: ${currentUser.id}`}\n            </span>\n          </h2>\n\n          <h3 className=\"CurrentUser__name\">\n            {currentUser.name}\n          </h3>\n          <p className=\"CurrentUser__email\">\n            {currentUser.email}\n          </p>\n          <p className=\"CurrentUser__phone\">\n            {currentUser.phone}\n          </p>\n\n          <button\n            type=\"button\"\n            className=\"CurrentUser__clear\"\n            onClick={clearUser}\n          >\n            Clear\n          </button>\n        </div>\n      )}\n\n      {isLoadingError && (\n        <div className=\"CurrentUser\">\n          <h2 className=\"CurrentUser__title\">\n            <span>\n              Please, try again: server cannot find user\n            </span>\n          </h2>\n        </div>\n      )}\n    </>\n  );\n});\n","import React, { useState, useEffect, useCallback } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { TodoList } from './components/TodoList';\nimport { CurrentUser } from './components/CurrentUser';\nimport { getTodosFromServer } from './api';\n\nconst App: React.FC = () => {\n  const [\n    selectedUserId,\n    setSelectedUserId,\n  ] = useState<null | number>(null);\n  const [todos, setTodos] = useState<Todo[]>([]);\n  const [error, setError] = useState<null | string>(null);\n\n  const clearUser = useCallback(() => {\n    setSelectedUserId(null);\n  }, []);\n\n  useEffect(() => {\n    const receiveTodosPromise = getTodosFromServer();\n\n    receiveTodosPromise\n      .then((receiveTodos) => {\n        setTodos(receiveTodos);\n      })\n      .catch((fetchError) => {\n        setError(fetchError.message);\n        setTodos([]);\n      });\n  });\n\n  useEffect(() => {\n    setTodos([]);\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {error ? (\n        <h1 className=\"App__error\">{error}</h1>\n      ) : (\n        <>\n          <div className=\"App__sidebar\">\n            <TodoList\n              todos={todos}\n              setSelectedUserId={setSelectedUserId}\n            />\n          </div>\n          <div className=\"App__content\">\n            <div className=\"App__content-container\">\n              {selectedUserId ? (\n                <CurrentUser\n                  userId={selectedUserId}\n                  clearUser={clearUser}\n                />\n              ) : 'No user selected'}\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}